(this["webpackJsonpbug-tracker-app"]=this["webpackJsonpbug-tracker-app"]||[]).push([[0],{66:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(0),r=a.n(n),i=a(24),s=a.n(i),o=a(17),l=(a(65),a(66),a(57)),j=a(36),d=a(58);var u=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Applications"})})};var b=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Developers"})})},h=a(59),O=a(50),p=a.n(O),x=a(54),f=a(8),v=a(56),g=a(22),k=a(47),m=a(25),D=a(39),C=a(9);var S=function(e){var t=e.headers,a=e.filterCriteria,n=e.tableData,r=e.tableType;return Object(c.jsx)(y,{tableData:n,filterCriteria:a,headers:t,tableType:r})},y=function(e){var t=e.tableData,a=void 0===t?{tableData:a}:t,n=e.filterCriteria,r=void 0===n?{filterCriteria:r}:n,i=e.headers,s=void 0===i?{headers:s}:i,o=e.tableType,l=void 0===o?{tableType:l}:o;return Object(c.jsx)(N,{tableData:a,filterCriteria:r,headers:s,tableType:l})},N=function(e){var t=e.tableData,a=void 0===t?{tableData:a}:t,r=e.filterCriteria,i=void 0===r?{filterCriteria:i}:r,s=e.headers,o=void 0===s?{headers:o}:s,l=e.tableType,j=void 0===l?{tableType:j}:l,d=Object(n.useState)(!1),u=Object(f.a)(d,2),b=u[0],O=u[1],p=Object(n.useState)(!1),x=Object(f.a)(p,2),v=x[0],D=x[1],S=Object(n.useState)(),y=Object(f.a)(S,2),N=y[0],T=y[1],w=Object(n.useState)(),F=Object(f.a)(w,2),L=F[0],A=F[1],P=Object(n.useState)(a),G=Object(f.a)(P,2),z=G[0],E=G[1],B=Object(C.f)(),H=function(e){A(e),D(!v),console.log("Filter Column: ".concat(N)),console.log("Filter Value: ".concat(L)),E(v?a:a.filter((function(t){return t[N]===e})))};return Object(c.jsxs)("div",{children:[Object(c.jsxs)(k.a,{horizontal:!0,children:[Object(c.jsx)(k.a.Item,{children:b||v?b&&!v?Object(c.jsxs)(g.a,{children:[Object(c.jsxs)(g.a.Toggle,{variant:"success",children:["Filter By ",N]}),Object(c.jsx)(g.a.Menu,{children:Object(h.a)(new Set(a.map((function(e){return e[N]})))).map((function(e,t){return Object(c.jsx)(g.a.Item,{onClick:function(){return H(e)},children:e},t)}))})]}):Object(c.jsxs)(m.a,{variant:"success",size:"md",onClick:function(){return O(!b),D(!v),void E(v?a:a.filter((function(e){return e[N]===L})))},children:["Clear ",N," Filter"]}):Object(c.jsxs)(g.a,{children:[Object(c.jsx)(g.a.Toggle,{variant:"success",children:"Choose Column Filter"}),Object(c.jsx)(g.a.Menu,{children:Object.keys(i).map((function(e,t){return Object(c.jsx)(g.a.Item,{onClick:function(){return t=e,O(!b),void T(t);var t},children:e},t)}))})]})}),Object(c.jsx)(k.a.Item,{children:Object(c.jsx)(m.a,{variant:"success",onClick:function(){return B.push("".concat(j,"/create"))},children:"Create Ticket"})})]}),Object(c.jsx)(I,{tableData:z,filterCriteria:i,headers:o,tableType:j})]})},I=function(e){var t=e.headers,a=e.tableData,r=e.tableType,i=Object(n.useState)(),s=Object(f.a)(i,2),o=s[0],l=s[1],j=Object(n.useState)(!1),d=Object(f.a)(j,2),u=d[0],b=d[1];return Object(c.jsxs)(v.a,{striped:!0,bordered:!0,hover:!0,responsive:"md",children:[Object(c.jsx)("thead",{className:"thead-dark",children:Object(c.jsx)("tr",{children:t&&t.map((function(e,t){return Object(c.jsx)("th",{onClick:function(){return l(e),void b(!u)},children:Object(c.jsx)("div",{children:e})},t)}))},"header-0")},"header-1"),Object(c.jsx)(T,{rows:a,headers:t,sortField:o,sortBy:u,tableType:r})]})},T=function(e){var t=e.headers,a=e.rows,n=e.sortField,r=e.sortBy,i=e.tableType,s=Object(C.f)(),o="Ticked ID";function l(e,t){return Object(c.jsx)("tr",{onClick:function(){return t=e[o],s.push("".concat(i,"/update/").concat(t));var t},children:t.map((function(t,a){return Object(c.jsx)("td",{children:e[t]},a)}))},e[o])}return r?a.sort((function(e,t){return e[n]>t[n]?1:-1})):a.sort((function(e,t){return e[n]>t[n]?-1:1})),Object(c.jsx)("tbody",{children:a&&a.map((function(e){return l(e,t)}))})},w=function(){var e=Object(n.useState)(),t=Object(f.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(Object(x.a)(p.a.mark((function e(){var t,a,c,n,i,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://karstenbugtracker.azurewebsites.net/api/tickets");case 2:if(!(t=e.sent).ok){e.next=13;break}return console.log("Success: ".concat(t.ok," ").concat(t.status)),e.next=7,t.json();case 7:for(n in a=e.sent,c=[],a)i=a[n].developer.developerFirstName,s=a[n].developer.developerLastName,o="".concat(i," ").concat(s),c.push({"Ticked ID":a[n].ticketID,"Ticket Name":a[n].ticketName,Status:a[n].status,Application:a[n].application.applicationName,Severity:a[n].severity,Developer:o});r(c),e.next=14;break;case 13:console.log("Failure: ".concat(t.ok," ").concat(t.status));case 14:case"end":return e.stop()}}),e)}))),[]),a?(console.log(a),Object(c.jsx)(S,{headers:Object.keys({"Ticked ID":"","Ticket Name":"",Status:"",Application:"",Severity:"",Developer:""}),filterCriteria:{Status:"",Application:"",Severity:"",Developer:""},tableData:a,tableType:"ticket"})):Object(c.jsx)(D.a,{animation:"border",role:"status",size:"xl",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})};var F=function(){return Object(c.jsx)(w,{})},L=a(7),A=a(13),P=a(31),G=a(29),z=a(43),E=a(53);var B=function(){var e,t=Object(C.g)(),a=t.crud,r=t.id,i=Object(C.f)(),s=function(e){var t=Object(n.useState)(e),a=Object(f.a)(t,2),c=a[0],r=a[1];return[c,function(e){r(Object(E.a)(Object(E.a)({},c),{},Object(z.a)({},e.target.id,e.target.value)))}]}({ticketStatus:"",dateCreated:"",userName:"Test User",developerAssigned:"",ticketName:"",ticketDescription:"",severity:"",dueDate:"",applicationName:""}),o=Object(f.a)(s,2),l=o[0],j=o[1],d=Object(n.useState)(!0),u=Object(f.a)(d,2),b=u[0],h=u[1],O=Object(n.useState)([]),p=Object(f.a)(O,2),x=p[0],v=p[1],g=Object(n.useState)(),k=Object(f.a)(g,2),S=k[0],y=k[1],N=Object(n.useState)(),I=Object(f.a)(N,2),T=I[0],w=I[1],F=Object(n.useState)(!0),B=Object(f.a)(F,2),H=B[0],V=B[1],J=Object(n.useState)(),M=Object(f.a)(J,2),U=M[0],R=M[1],K=Object(n.useState)(),q=Object(f.a)(K,2),Q=q[0],W=q[1],X=Object(n.useState)(l.ticketName),Y=Object(f.a)(X,2),Z=Y[0],$=Y[1],_=Object(n.useState)(l.dueDate),ee=Object(f.a)(_,2),te=ee[0],ae=ee[1],ce=Object(n.useState)(l.dateCreated),ne=Object(f.a)(ce,2),re=ne[0],ie=ne[1],se=Object(n.useState)(!1),oe=Object(f.a)(se,2),le=oe[0],je=oe[1],de=Object(n.useState)(),ue=Object(f.a)(de,2),be=ue[0],he=ue[1];return Object(n.useEffect)((function(){"update"==a&&fetch("http://karstenbugtracker.azurewebsites.net/api/tickets/".concat(r)).then((function(e){return e.json()})).then((function(e){y(e),V(!1),l.ticketName=e[0].ticketName,l.ticketDescription=e[0].ticketDescription,l.severity=e[0].severity,l.userName=e[0].userName;var t=new Date(e[0].dateDue);l.dueDate=t;var a=new Date(e[0].dateCreated);l.dateCreated=a,ie(a.toDateString()),l.developerAssigned=e[0].developer.developerID,l.applicationName=e[0].application.applicationID,l.ticketStatus=e[0].status,$(l.ticketName),ae(l.dueDate)}),(function(e){y(e),console.log("Failed: ".concat(S))})),fetch("http://karstenbugtracker.azurewebsites.net/api/developers").then((function(e){return e.json()})).then((function(e){y(e),R(e),V(!1)}),(function(e){y(e),console.log("Failed: ".concat(S))})),fetch("http://karstenbugtracker.azurewebsites.net/api/applications").then((function(e){return e.json()})).then((function(e){y(e),W(e),V(!1)}),(function(e){V(!1),y(e),console.log("Failed: ".concat(S))})),"create"==a&&(l.userName="Test User",l.ticketStatus="Open",l.dateCreated=new Date)}),[]),Object(c.jsxs)("div",{children:[be?Object(c.jsx)(G.a,{variant:"info",onClose:function(){return i.push("/home")},dismissible:!0,children:Object(c.jsx)(G.a.Heading,{children:Object(c.jsx)("p",{children:"Ticket #: ".concat(be.ticketID," ").concat(be.ticketName," created")})})}):null,le?Object(c.jsx)(G.a,{variant:"info",onClose:function(){return je(!1)},dismissible:!0,children:Object(c.jsx)(G.a.Heading,{children:Object(c.jsx)("p",{children:"Update Successful"})})}):null,H&&"update"==a?Object(c.jsx)(D.a,{animation:"border",role:"status",size:"xl",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(c.jsxs)(L.a,{children:[Object(c.jsxs)(G.a,{variant:"danger",show:!!(b&&x.length>0),children:[Object(c.jsx)(G.a.Heading,{children:Object(c.jsx)("h4",{children:"Please Fill"})}),x.map((function(e,t){return Object(c.jsx)("p",{children:e},t)}))]}),Object(c.jsxs)(P.a,{children:[Object(c.jsx)(A.a,{lg:6,children:Object(c.jsxs)(L.a.Group,{controlId:"ticketNumber",children:[Object(c.jsx)(L.a.Label,{children:"Ticket #:"}),Object(c.jsx)(L.a.Control,{defaultValue:"update"==a?r:null,readOnly:"true"})]})}),Object(c.jsx)(A.a,{lg:6,children:Object(c.jsxs)(L.a.Group,{controlId:"ticketStatus",children:[Object(c.jsx)(L.a.Label,{children:"Ticket Status"}),Object(c.jsxs)(L.a.Control,{as:"select",value:l.ticketStatus,onChange:j,children:[Object(c.jsx)("option",{children:"Open"}),Object(c.jsx)("option",{children:"Closed"})]})]})})]}),Object(c.jsxs)(P.a,{children:[Object(c.jsx)(A.a,{lg:4,children:Object(c.jsxs)(L.a.Group,{controlId:"ticketName",children:[Object(c.jsx)(L.a.Label,{children:"Ticket Name"}),Object(c.jsx)(L.a.Control,{placeholder:"Enter Ticket Name",onChange:j,defaultValue:Z})]})}),Object(c.jsx)(A.a,{lg:8,children:Object(c.jsxs)(L.a.Group,{controlId:"ticketDescription",children:[Object(c.jsx)(L.a.Label,{children:"Issue Description"}),Object(c.jsx)(L.a.Control,{as:"textarea",rows:2,placeholder:"Enter Ticket Description",onChange:j,defaultValue:l.ticketDescription})]})})]}),Object(c.jsxs)(P.a,{children:[Object(c.jsx)(A.a,{lg:4,md:4,children:Object(c.jsxs)(L.a.Group,{controlId:"severity",children:[Object(c.jsx)(L.a.Label,{children:"Severity"}),Object(c.jsx)(L.a.Control,{as:"update"==a?"textarea":"select",onChange:function(e){var t=JSON.stringify(e.target.value),a=new Date;'"High"'==t?a.setDate(a.getDate()+1):'"Medium"'==t?a.setDate(a.getDate()+5):'"Low"'==t?a.setDate(a.getDate()+10):a=null,l.dueDate=a,ae(l.dueDate),j(e)},value:"update"==a?l.severity:null,readOnly:"update"==a,children:"update"==a?null:Object.keys({"Choose...":"",High:"",Medium:"",Low:""}).map((function(e,t){return Object(c.jsx)("option",{children:e},t)}))})]})}),Object(c.jsx)(A.a,{lg:4,md:4,children:Object(c.jsxs)(L.a.Group,{controlId:"applicationName",children:[Object(c.jsx)(L.a.Label,{children:"Application"}),Object(c.jsxs)(L.a.Control,{as:"select",onChange:j,value:l.applicationName,children:["update"==a?null:Object(c.jsx)("option",{children:"Choose..."}),Q&&l?Q.map((function(e,t){return Object(c.jsx)("option",{value:e.applicationID,children:"".concat(e.applicationName)},t)})):null]})]})}),Object(c.jsx)(A.a,{lg:4,md:4,children:Object(c.jsxs)(L.a.Group,{controlId:"developerAssigned",children:[Object(c.jsx)(L.a.Label,{children:"Developer Assigned"}),Object(c.jsxs)(L.a.Control,{as:"select",onChange:j,value:l.developerAssigned,children:["update"==a?null:Object(c.jsx)("option",{children:"Choose..."}),U&&l?U.map((function(e,t){return Object(c.jsx)("option",{value:e.developerID,children:"".concat(e.developerFirstName," ").concat(e.developerLastName)},t)})):null]})]})})]}),Object(c.jsxs)(P.a,{children:[Object(c.jsx)(A.a,{lg:4,md:6,children:Object(c.jsxs)(L.a.Group,{controlId:"dateCreated",children:[Object(c.jsx)(L.a.Label,{children:"Date Created"}),Object(c.jsx)(L.a.Control,{readOnly:!0,defaultValue:"update"==a?re:(new Date).toDateString(),onChange:j})]})}),Object(c.jsx)(A.a,{lg:4,md:6,children:Object(c.jsxs)(L.a.Group,{controlId:"dueDate",children:[Object(c.jsx)(L.a.Label,{children:"Due Date"}),Object(c.jsx)(L.a.Control,{defaultValue:te?te.toDateString():null,onChange:j,readOnly:!0})]})}),Object(c.jsx)(A.a,{lg:4,md:6,children:Object(c.jsxs)(L.a.Group,{controlId:"userName",children:[Object(c.jsx)(L.a.Label,{children:"User Name"}),Object(c.jsx)(L.a.Control,{defaultValue:l.userName,onChange:j,readOnly:!0})]})})]}),Object(c.jsxs)(P.a,{children:[Object(c.jsx)(A.a,{xs:6,children:Object(c.jsx)(L.a.Group,{children:Object(c.jsx)(m.a,{onClick:function(){return function(){var t=[];for(var c in l)""==l[c]&&t.push(c),"Choose..."==l[c]&&t.push(c);if(v(t),t.length>0?h(!0):0==t.length&&h(!1),0==t.length&&"update"==a){var n=new Headers;n.append("Content-Type","application/json");var i=JSON.stringify({ticketID:r,ticketName:l.ticketName,ticketDescription:l.ticketDescription,severity:l.severity,dateCreated:l.dateCreated,dateDue:l.dueDate,userName:l.userName,status:l.ticketStatus,applicationID:l.applicationName,developerID:l.developerAssigned});e={method:"PUT",headers:n,body:i,redirect:"follow"},fetch("http://karstenbugtracker.azurewebsites.net/api/tickets/".concat(r),e).then((function(e){return e.text()})).then((function(e){w(e),console.log("Success Put API: ".concat(T)),console.log("Success Result: ".concat(e)),je(!0)}),(function(e){w(e),console.log("Error Put API: ".concat(T)),console.log("Error Result: ".concat(e))}))}else if(0==t.length&&"create"==a){var s=new Headers;s.append("Content-Type","application/json");var o=l.dateCreated;o.setDate(o.getDate()-1);var j=l.dueDate;j.setDate(j.getDate()-1);var d=JSON.stringify({ticketName:l.ticketName,ticketDescription:l.ticketDescription,severity:l.severity,dateCreated:o,dateDue:j,userName:l.userName,status:l.ticketStatus,applicationID:l.applicationName,developerID:l.developerAssigned});e={method:"POST",headers:s,body:d,redirect:"follow"},fetch("http://karstenbugtracker.azurewebsites.net/api/tickets",e).then((function(e){return e.json()})).then((function(e){w(e),console.log("Success Post API: ".concat(T)),JSON.stringify(e),console.log("New Ticket Data ".concat(e)),he({ticketID:e.ticketID,ticketName:e.ticketName})}),(function(e){w(e),console.log("Error Post API: ".concat(T)),console.log(e)}))}}()},disabled:!(!le&&!be),children:"Submit"})})}),Object(c.jsx)(A.a,{xs:6,children:Object(c.jsx)(L.a.Group,{children:Object(c.jsx)(m.a,{onClick:function(){return i.push("/home")},children:"Cancel"})})})]})]})]})};var H=function(){return Object(c.jsxs)(o.a,{children:[Object(c.jsxs)(j.a,{bg:"primary",expand:"lg",children:[Object(c.jsx)(j.a.Brand,{as:o.b,to:"/home",children:Object(c.jsx)("h1",{children:"Bug Tracker"})}),Object(c.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(c.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(c.jsx)(d.a,{defaultActiveKey:"/home",as:"ul"})})]}),Object(c.jsxs)(C.c,{children:[Object(c.jsx)(C.a,{path:"/ticket/:crud/:id",children:Object(c.jsx)(B,{})}),Object(c.jsx)(C.a,{path:"/ticket/:crud",children:Object(c.jsx)(B,{})}),Object(c.jsx)(C.a,{path:"/home",children:Object(c.jsx)(F,{})}),Object(c.jsx)(C.a,{path:"/developers",children:Object(c.jsx)(b,{})}),Object(c.jsx)(C.a,{path:"/applications",children:Object(c.jsx)(u,{})}),Object(c.jsx)(C.a,{exact:!0,path:"/",children:Object(c.jsx)(F,{})})]})]})};var V=function(){return Object(c.jsx)(l.a,{fluid:"lg",children:Object(c.jsx)(H,{})})},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,83)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),r(e),i(e)}))};s.a.render(Object(c.jsx)(o.a,{children:Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(V,{})})}),document.getElementById("root")),J()}},[[78,1,2]]]);
//# sourceMappingURL=main.386b73c6.chunk.js.map